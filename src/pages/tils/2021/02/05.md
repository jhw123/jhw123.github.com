- KCP 결제창 연동

    - 카드 결제 기능 추가를 위해 프런트에서 KCP 결제를 연동하는 업무를 맡았다. 
      KCP 결제 연동은 단순히 프런트에서 KCP API를 사용하는 것이 아닌 KCP에서 제공하는 url의 페이지를 띄워야 하는 방식이었다.
      다른 사이트의 페이지로 넘어가버리면 플로우의 컨트롤을 완전히 잃게 된다고 생각해, 
      `<iframe>`을 사용해서 어플리케이션에 남아있으면서도 새로운 페이지를 열려했었다.
      
    - 연동 방식은 1) 프런트에서 서버로 결제 API 호출, 2) 서버에서 결제와 관련된 정보를 `<form>` 형식으로 담은 페이지 반환,  
      3) 반환된 페이지에서 `window.onLoad()`로 폼을 KCP 서버로 제출, 4) KCP 서버에서 결제 페이지로 리다이렉션 이었다.
      우선, 서버 응답값으로 받은 html을 `<iframe>`에 넣기 위해 `<iframe src="data:text/html;...">`을 사용했다. 
      `<iframe>`의 소스값으로 url만 전달할 수 있을 줄 알았는데 html 자체도 넣을 수 있다는 걸 이번에 처음 알게되었다.
      혹여나 소스에 html을 넣어 리다이렉션에는 문제가 없을까 했지만 잘 동작했다. 
      하지만 문제는 KCP 결제창에 뷰의 높이를 조정하는 스크립트가 있었고 (아마 크기가 다른 모바일 기기마다 지원하려 했던 것으로 보인다...?)
      이 페이지에서도 내부적으로도 중첩된 `<iframe>`을 사용하는 바람에 KCP의 레이아웃 스크립트가 제대로 동작하지 않고 내가 건드릴 수도 없었다.
      관련 이슈에 대해서 검색을 해보니 애초에 KCP쪽에서는 결제 화면을 `<iframe>`에 담지 말라고 권고하고 있어서 결국 url을 전환하는 방식으로 재구현했다.
