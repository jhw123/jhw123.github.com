- [서버 배포방식 스터디](https://github.com/jhw123/til/commit/9b921834c6d58157493578fa0da631cc332311e6)
    - 회사 내부 테크톡을 계기로 서버 배포 방식에 대해 살펴보게 되었다. 
      웹이나 앱과 같은 경우는 사용자 개개인에게 전달되어 사용자가 세션동안 그 내부에서만 인터랙팅하는 반면, 
      서버와 같은 경우는 다수의 사용자와 배포 중에도 지속적으로 통신해야하고 클라이언트(특히, 앱)의 여러 버전에 동시에 대응도 해야하기 때문에 배포과정에서 더 신경을 써야한다. 
      또한 웹 배포와 같이 서빙되는 파일을 교체하는 것이 아닌 여러 개의 서버 인스턴스에 각각 프로세스를 새로 띄워야하기 때문에 배포 시간도 상당히 걸리는 점도 있다.
    
    - 회사에서는 현재 카나리 방식으로 배포를 하고 있는데, 테크톡의 주제는 배포 중 겪은 문제점에 대한 회고였다. 
      발표자가 겪었던 문제 중 인상 깊었던 것은 카나리 배포 중 두 서버가 태스트 큐(Task queue)를 공유하는데 이전 버전의 서버에서 만든 태스크가 새로운 서버에 전달되면서 
      서버 버전의 문제로 태스크를 처리하지 못한다는 것이었다. 
      태스크 큐가 어떻게 구현되어 있고 복잡한지 정확하게 모르지만 각각의 서버에서 독립적으로 태스크 큐를 가지고 있는 구조라면 해당 문제를 해결할 수 있지 않았을까 생각해보았다. 
      아니면 태스크 메타데이터에 태스크를 만든 서버의 버전이나 id를 달아 그 정보를 보고 처리할 수 있는 서버가 태스크를 가지고 가게하는 구조가 좀 더 간단한 구현으로 해결 가능하지 
      않을까 싶기도 하다.

    - 처음에 클라이언트에서는 배포가 비교적 쉽다고 얘기했지만, 사용자가 페이지에 접근해 서비스를 사용하고 있는 와중 웹 배포가 되어 다음 페이지로 넘어가면 어떻게 되나 생각을 해보았다. 
      Single Page Application의 경우, 배포가 새로 되었다 하더라도 이미 같은 버전에서의 다른 페이지들을 모두 클라이언트에서 사전에 받아두고 서버에 새로 요청하지 않을 것이므로, 
      큰 문제가 없을 것 같았다. 하지만 Server Side Rendering된 페이지의 경우 다음 페이지가 없을 수도 또는 다른 비즈니스 로직을 가져 사용자 경험에 큰 영향을 줄 수 있을 것 같았다. 
      이러한 관점에서 봤을 때 SPA가 비단 빠른 페이지 이동뿐만을 지원하는 것이 아닌 웹 배포 방식에도 크게 도움을 주는 것이 아닌가 한다.
